(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/reg/reg"],{"09f6":function(e,t,a){"use strict";a.r(t);var n=a("93d0"),o=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t["default"]=o.a},"1cff":function(e,t,a){"use strict";(function(e){a("0e66");n(a("66fd"));var t=n(a("395e"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},"395e":function(e,t,a){"use strict";a.r(t);var n=a("caee"),o=a("09f6");for(var r in o)"default"!==r&&function(e){a.d(t,e,(function(){return o[e]}))}(r);a("723f");var u,d=a("f0c5"),i=Object(d["a"])(o["default"],n["b"],n["c"],!1,null,"366befce",null,!1,n["a"],u);t["default"]=i.exports},"723f":function(e,t,a){"use strict";var n=a("94e6"),o=a.n(n);o.a},"93d0":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("b3f8")),o=r(a("d5f1"));r(a("cc19"));function r(e){return e&&e.__esModule?e:{default:e}}var u={components:{},data:function(){return{loading:!1,redirect:encodeURIComponent("/pages/me/me"),loadingWechat:!1,waitingtime:"发送验证码",telNumber:"",disabledSendCode:!1}},onLoad:function(e){n.default.debug&&console.log("onLoad",e),e.redirect&&(this.redirect=e.redirect)},onShow:function(){var t=o.default.getToken();if(t){var a=decodeURIComponent(this.redirect);a.indexOf("?")>-1?e.redirectTo({url:a}):e.switchTab({url:a})}},methods:{submit:function(t){var a=this;if(t.detail.value.re_password==t.detail.value.password)if(""!=t.detail.value.password&&""!=t.detail.value.username){a.loading=!0;var r={phoneNumber:t.detail.value.email,code:t.detail.value.code,password:t.detail.value.password,type:"1"};console.log(r),o.default.request(n.default.api.register,r,"POST").then((function(t){console.log(t),n.default.debug&&console.log(n.default.api.login,t),o.default.toastSuccess("注册成功"),setTimeout((function(){var t=decodeURIComponent(a.redirect);t.indexOf("?")>-1?e.redirectTo({url:t}):e.switchTab({url:t})}),1500)})).catch((function(e){n.default.debug&&console.log(e),a.loading=!1,o.default.toastError(e.data.message||e.errMsg)}))}else o.default.toastError("手机号或验证码不能为空");else o.default.toastError("两次输入的密码不一样")},toLogin:function(){e.navigateTo({url:"/pages/login/login?redirect="+this.redirect})},wechatLogin:function(t){var a=this,r=t.detail;a.loadingWechat||(a.loadingWechat=!0,e.login({success:function(t){n.default.debug&&console.log("微信登录",t,r),t.code?o.default.request(n.default.api.loginByWechat,{code:t.code,userInfo:r.rawData},"POST").then((function(e){var t=e.data.user;if(void 0==t||t.uid<=0||""==t.token)return o.default.toastError("登录失败：未知错误"),void(a.loadingWechat=!1);o.default.setUser(t),o.default.toastSuccess("登录成功"),setTimeout((function(){o.default.redirect(decodeURIComponent(a.redirect))}),1500)})).catch((function(t){n.default.debug&&console.log(t),401==t.statusCode?(o.default.setWeChatUser(r),e.navigateTo({url:"/pages/bind/bind?redirect="+a.redirect+"&sess="+encodeURIComponent(t.data.data.sess)})):o.default.toastError(t.data.message||t.errMsg),a.loadingWechat=!1})):o.default.toastError("登录失败！"+t.errMsg)},fail:function(e){o.default.toastError(e.errMsg)}}))},getTelNumber:function(e){var t=this;t.telNumber=e.detail.value},sendCode:function(e){console.log("发送验证码"),console.log(e);var t=this;t.disabledSendCode=!0;var a=60;t.waitingtime=a+"秒重新发送";var r=null;r=setInterval((function(){a>0&&a<=60?(a--,t.waitingtime=a+"秒重新发送"):(t.waitingtime="发送验证码",a=60,t.disabledSendCode=!1,clearInterval(r))}),1e3);var u={phoneNumber:t.telNumber};console.log(u),o.default.request(n.default.api.sendMessage,u,"POST").then((function(e){console.log("config.api.sendMessage"),console.log(e)})).catch((function(e){o.default.toastError(e.data.message||e.errMsg)}))}}};t.default=u}).call(this,a("543d")["default"])},"94e6":function(e,t,a){},caee:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n}));var n={uNavbar:function(){return a.e("uview-ui/components/u-navbar/u-navbar").then(a.bind(null,"76ac"))}},o=function(){var e=this,t=e.$createElement;e._self._c},r=[]}},[["1cff","common/runtime","common/vendor"]]]);